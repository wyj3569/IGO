# IGO Server

## ⭐️ IGO 팀 전체 Notion Page ⭐️

https://www.notion.so/IGO-UWB-e0a47b1eebb7448db78db0fefc6d49e6?pvs=4

# 🌟 **Contents** 🌟

## 1️⃣ **환자의 위치 계산**

---

> 단거리 무선 통신 프로토콜인 **UWB 기술을 활용하여 정밀하게 거리 값을 측정**할 수 있습니다.

세 개의 기지국을 설치한 뒤, 환자와 각 기지국 사이의 거리를 구하면,
거리를 반지름으로 하는 3개의 원을 그릴 수 있고,
원들의 교점을 이용해서 환자의 위치 좌표를 계산할 수 있습니다.

위치 좌표는 측정한 거리 정보를 바탕으로 **‘삼변측량 알고리즘’**을 이용해 계산합니다.
**삼변측량 알고리즘**이란,  다음 그림과 같이 기지국들의 고정된 위치가 중심이고 거리가 반지름이 되는 원을 그려 이 원들의 교점을 계산하는 알고리즘입니다.

## ⭐️ 삼변측량 상세 설명 Notion Page ⭐️

https://www.notion.so/4bf6700f7c95416b89e76c21370329eb?pvs=4

> - 그림을 통해 이해하기
>     
>     ![Untitled](https://user-images.githubusercontent.com/49744558/230747109-e2204e4a-a9a5-4c3f-80f3-363d2a19ca2b.png)
>     
>     위치 좌표 계산 과정

## 2️⃣ **환자 → 의료진 호출**

---

### 📐 환자와의 거리 측정

> **환자와 기지국 사이의 거리 값**을 HTTP 통신을 이용하여 일정 시간 간격으로 계속해서 전달받습니다. 
이후 삼변측량 알고리즘을 이용해서 **환자의 현재 위치 좌표를 계산**하고, 환자의 데이터베이스 테이블에 현재 위치 좌표를 **저장**합니다.

환자가 의료진을 호출하면, 환자 데이터베이스 테이블에 저장된 **위치 좌표를 조회**하고, 
`Firebase Cloud Messaging` 서버를 이용해서 의료진 스마트폰 애플리케이션에 **전송**합니다.
> 

### 📩 서버로 거리 값 전송

> 환자가 HTTP 통신를 이용하여 **의료진을 호출**하면,
서버에서 해당 **환자, 의료진, 병원 정보**를 데이터베이스에서 **조회**하여 필요한 데이터를 담당 의료진 스마트폰 애플리케이션에 **전송**해줍니다.

애플리케이션에 푸시 알림 전송을 위하여 `Firebase Cloud Messaging` 서버에 **푸시 알림 전송을 요청**하고, FCM 서버는 해당 의료진의 애플리케이션에 푸시 알림를 **발송**합니다. 

의료진 스마트폰 애플리케이션에서 푸시 알림를 수신하고, **해당 환자의 신상 정보와 위치 좌표를 표시**할 수 있습니다.
> 

## 3️⃣ **의료진 → 환자 호출**

---

### 📥 **의료진으로부터 환자 호출 신호를 전달받기**

> 의료진이 스마트폰 애플리케이션에서 **환자 호출하기 버튼**을 누르면, 
서버에서 해당 **환자, 의료진, 병원 정보**를 데이터베이스에서 **조회**하여 필요한 데이터를 담당 의료진 스마트폰 애플리케이션에 **전송**해줍니다. 

애플리케이션에 **푸시 메시지를 발송**해서, 해당 환자의 **신상 정보와 위치 좌표를 표시**할 수 있다.
> 

### 📤 **환자 단말기에 호출 알림 보내기**

> 의료진이 스마트폰 애플리케이션에서 환자를 **호출**하면, 환자가 호출됐다는 사실을 인지할 수 있도록 합니다. 

환자 단말기의 IP값을 기반으로 단말기 고유 URL에 접속하여 **진동모터와 LED, 피에조 부저를 작동**시킵니다.
> 

## 4️⃣ **기타 필수적인 기능**

---

> 서버에서 병원의 정보, 환자의 정보, 의료진의 정보를 저장 및 관리합니다.

의료진 스마트폰 애플리케이션에서 필요한 회원가입 기능, 로그인 기능, 병원 정보 조회 기능, 의료진 정보 조회, 수정 기능, 환자 생성, 조회, 수정, 삭제 기능을 Restful API를 정의하여 제공합니다.
> 

## 5️⃣ 작업 내용

---

### 깃허브 링크 https://github.com/wyj3569/IGO

[igo-organization](https://github.com/igo-organization)
